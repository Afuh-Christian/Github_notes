# 14 Rebasing     2:49:32 

- Another method for bringing changes from one branch to another ..

   base  master
     |    |
C <- B <- L  
      \
       \
        F1 <- F2 
               |
             feature

- We need to resolve this into a linear branch like in squah ... 
- we change the base(B) to be the latest commit(L) of the master 

        master  
          |
C <- L <- B  
           \
            \
             F1 <- F2 
                    |
                    feature

- Now it's linear .... 
- Now we can do a "fast-forward merge" 


# Caution .... 
- Rebasing rewrites history 
- should be used for branches or commits that are local in your repository ... 

# Why rewrites occure 
- During rebasing 
- git does not change the base(parent) of F1 because commits in git are immutable
- So git creates copies of F1(F1*) and F2(F2*) and apply them to master 
- then moves the feature pointer to the F2* 

        master
          |  
C <- B <- L <- F1* <- F2* 
      \                |
       \            feature
        F1 <- F2 

- git auto removes F1 & F2 cuz there's not branch pointing to it
- so we are rewriting history because 
      - (F1 & F2) != (F1* & F2*) 



# FOR THIS REASON ... DO NOT USE THIS METHOD IF YOU HAVE SHARED THIS REPO HISTORY WITH OTHERS ..





























# Let's use an example ... 

-create a branch and make about 2 commits to it ... 

> git switch -C featureB 
> echo 1 feature >> file1.txt
> git commit -am "featue update"
> echo 1 feature >> file1.txt
> git commit -am "featue update"


- switch to master 

> git switch master 
> echo hello > file2.txt
> git commit -am "featue update master"



# check history ....

* d411078 (master) feature update master
| * 3e1f648 (HEAD -> featureB) featue upate
| * 035e63b featue upate
|/
* 7cabcb9 Fixed the bug on BugfixB

# For rebasing ... 
change the base from 7cabcb9(old base) to d411078(latest commit of master) 


# step 1 
- switch to target branch 
> git switch featureB

- rebase (change base of featureB to last commit on master .)
> git rebase master

# Nb ... this command usually have conflicts in most cases ... 
# check history ... 
- our branches now have a direct linear path ... 

# Now to merge git will do a fast-forwar merge ... 
> git switch master 
> git merge featureB


# Now delete the feautureB .... 
> git branch -d featureB   



































# let's create a scenario that results in a conflict ... 

# master branch
> echo ocean >> demo.txt
> git commit -am "Update demo"


# feature branch
> echo oceanic river >> demo.txt
> git commit -am "Update demo"

# feature branch
> git rebase master
Auto-merging demo.txt
CONFLICT (content): Merge conflict in demo.txt
error: could not apply 2fe9758... Update demo m
hint: Resolve all conflicts manually, mark them as resolved with
hint: "git add/rm <conflicted_files>", then run "git rebase --continue".
hint: You can instead skip this commit: run "git rebase --skip".
hint: To abort and get back to the state before "git rebase", run "git rebase --abort".
Could not apply 2fe9758... Update demo m

# we resolve the conflict thesame way ... 
- using the mergetool we set 
> git mergetool
 - save and exit tool 

# CHRISTIAN@CLaptop MINGW64 /e/Saved Files/Courses/GITHUB/GITHUB/3 Branching/Moon (featureB|REBASE 1/1)

# rebase opitons 
- (--continue)  
    - > git rebase --continue
    - to tell rebase to apply the next commit ontop of master 
    - if the next commit also has a conflict , again we'll end up in thesame state 
    - so we resolve the conflict and tell git to continue rebasing . 

- (--skip) 
    - > git rebase --skip
    - this will skip the current commit and move on to the next commit 
    - if we look at a conflict an we do not care about the conflict , we can skip it .

- (--abort)
    - > git rebase --abort
    - this is usefull when , we have so many commits to apply ontop of master , perhaps some branches have diverged for a long time 
        - in that case , if we do not have time for resolving all these conflicts  and going through a complete rebase , we can abort the rebase here
























#  If we abort .. 

> git rebase --abort



# but there are still untracked files ... generated by the mergetools

# featrueB branch 
> git status -s 
?? demo.txt.orig

> git clean -fd



# To prevent our mergetools from accidentally generating these untracked files

> git config --global mergetool.keepBackup false
